<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>乃木坂ことだま箱 | エモタグ分類 + 多機能検索</title>
  <link href="https://fonts.googleapis.com/css2?family=Klee+One&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Klee One', sans-serif; background-color: #fff8f2; color: #4a355f; margin: 0; padding: 0; }
    header { background-color: #fce2e2; padding: 20px 10px; text-align: center; border-bottom: 3px solid #d4b3db; }
    header img { max-width: 70%; height: auto; display: block; margin: 0 auto 10px; }
    header p { margin: 0; font-size: 15px; color: #6a4c93; }
    .container { max-width: 850px; margin: 40px auto; padding: 0 20px; }
    h1 { font-size: 26px; color: #6a4c93; text-align: center; margin-bottom: 10px; }
    h2 { font-size: 20px; margin-top: 50px; color: #4a355f; border-left: 8px solid #d4b3db; padding-left: 10px; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 18px; background: #fff; padding: 15px; border: 2px solid #f1d3f3; border-radius: 12px;
         box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    a { text-decoration: none; color: #4a355f; font-weight: bold; }
    a:hover { text-decoration: underline; }
    .footer { text-align: center; font-size: 13px; color: #a493b5; margin: 50px 0 20px; }

    .search-box { margin-top: 40px; text-align: center; }
    input[type="text"] {
      padding: 10px;
      width: 60%;
      font-size: 16px;
      border: 2px solid #c8b3d9;
      border-radius: 8px;
    }
    select {
      padding: 10px;
      font-size: 15px;
      margin-left: 10px;
      border-radius: 8px;
    }
    button {
      padding: 10px 16px;
      background-color: #c8b3d9;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      margin-left: 10px;
    }
    button:hover { background-color: #a68ac5; }
    #results {
      margin-top: 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <header>
    <img src="A_logo_design_in_digital_2D_art_medium_features_a_.png" alt="乃木坂ことだま箱 ロゴ">
    <p>Volではなく、感情でつながる。タグで読み解く乃木坂のことだま。</p>
  </header>

  <div class="container">
    <h1>乃木坂ことだま箱 - タグ分類</h1>

    <div class="search-box">
      <h2>🔍 楽曲・映像・エピソード検索</h2>
      <input type="text" id="searchTerm" placeholder="曲名やメンバー名を入力">
      <select id="searchType">
        <option value="apple">🎧 Apple Music</option>
        <option value="youtube">▶ YouTube</option>
        <option value="site">🔍 サイト内検索</option>
      </select>
      <button onclick="search()">検索</button>
      <div id="results"></div>
    </div>

    <script>
      const sitePages = {
        "アルノ": "aruno_actually.html",
        "さくら": "endo_silent_power.html",
        "五百城": "ioki_tears.html",
        "飛鳥": "asuka_aya_trust.html",
        "彩": "asuka_aya_trust.html"
      };

      function search() {
        const term = document.getElementById("searchTerm").value.trim();
        const type = document.getElementById("searchType").value;
        const results = document.getElementById("results");
        results.innerHTML = "";

        if (!term) return;

        if (type === "apple") {
          const url = "https://itunes.apple.com/search?term=" + encodeURIComponent(term) + "&country=JP&entity=song&limit=1";
          fetch(url)
            .then(res => res.json())
            .then(data => {
              if (data.results.length === 0) {
                results.innerHTML = "<p>Apple Musicで見つかりませんでした。</p>";
                return;
              }
              const track = data.results[0];
              results.innerHTML = `
                <p><strong>🎵 ${track.trackName}</strong> by ${track.artistName}</p>
                <p><a href="${track.trackViewUrl}" target="_blank">▶ Apple Musicで聴く</a></p>`;
            });
        } else if (type === "youtube") {
          const ytUrl = "https://www.youtube.com/results?search_query=" + encodeURIComponent(term + " 乃木坂46");
          window.open(ytUrl, "_blank");
        } else if (type === "site") {
          for (const key in sitePages) {
            if (term.includes(key)) {
              location.href = sitePages[key];
              return;
            }
          }
          results.innerHTML = "<p>サイト内に該当ページが見つかりませんでした。</p>";
        }
      }
    </script>

  </div>

  <div class="footer">© 乃木坂ことだま箱 | 感情でつながるファンサイト</div>
</body>
</html>
